!function(s){function t(e){s.when(s("#woogosend-buttons").remove()).then(function(){s("#btn-ok").hide().after(wp.template("woogosend-buttons")(function(e){var o={btn_right:{id:"save-settings",icon:"yes",label:a("buttons.Save Changes")}};return e||o}(e)))})}function n(e,o,n){"string"==typeof o&&(o=o.split("."));try{for(var t=e,a=0;a<o.length;a++)t=t[o[a]];return t}catch(e){return console.log("woogosendObject",e),n}}function a(e,o){return n(woogosend_backend.i18n,e,o)}function i(e,o){return n(woogosend_backend.i18n.errors,e,o)}!function(e){"use strict";var r,s,a,t,i,o,d,l,n;r=[],s=function(){},a={},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=[],l={},n=function(){return s},i=e.console?function(a){var i;return a in console&&(i=console[a])&&(console[a]=function(){var e,o,n,t;for(e=r.slice.call(arguments,0),n=0,t=l[a].handlers.length;n<t;n++)s.apply.call(l[a].handlers[n],console,e);for(n=0,t=d.length;n<t;n++)o=[a],r.push.apply(o,e),s.apply.call(d[n],console,o);s.apply.call(i,console,e)}),console[a]||n}:n,function(){var e,o,n;for(e=0,o=t.length;e<o;e++)l[n=t[e]]={handlers:[]},i(n)}(),o=function(e,o){var n,t;if("[object Object]"===a.toString.call(e))for(n in e)t=e[n],"all"===n?d.push(t):n in l&&l[n].handlers.push(t);else"function"==typeof e?d.push(e):e in l&&l[e].handlers.push(o)},e.ConsoleListener={on:o}}(this);var d={params:{},origin_lat:"",origin_lng:"",origin_address:"",zoomLevel:16,apiKeyErrorCheckInterval:null,apiKeyError:"",editingAPIKey:!1,init:function(e){d.params=e,d.apiKeyError="",d.editingAPIKey=!1,ConsoleListener.on("error",function(e){-1!==e.toLowerCase().indexOf("google")&&(d.apiKeyError=e),s(".gm-err-message").length&&s(".gm-err-message").replaceWith('<p style="text-align:center">'+d.convertError(e)+"</p>")}),s('[data-link="api_key"]').each(function(){s(this).after(wp.template("woogosend-button")({href:"#",class:"woogosend-buttons--has-icon woogosend-api-key-button",text:'<span class="dashicons"></span>'}))}),s(document).off("focus",'[data-link="api_key"]'),s(document).on("focus",'[data-link="api_key"]',function(){s(this).prop("readonly")&&!s(this).hasClass("loading")&&s(this).data("value",s(this).val()).prop("readonly",!1)}),s(document).off("blur",'[data-link="api_key"]'),s(document).on("blur",'[data-link="api_key"]',function(){s(this).prop("readonly")||s(this).hasClass("editing")||s(this).data("value",void 0).prop("readonly",!0)}),s(document).off("input",'[data-link="api_key"]',d.handleApiKeyInput),s(document).on("input",'[data-link="api_key"]',d.handleApiKeyInput),s(document).off("click",".woogosend-api-key-button",d.editApiKey),s(document).on("click",".woogosend-api-key-button",d.editApiKey),s(document).off("click",".woogosend-field--origin"),s(document).on("click",".woogosend-field--origin",function(){s(this).prop("readonly")&&s(".woogosend-edit-location-picker").trigger("click")}),s(document).off("focus",'[data-link="location_picker"]',d.showLocationPicker),s(document).on("focus",'[data-link="location_picker"]',d.showLocationPicker),s(document).off("click","#woogosend-btn--map-cancel",d.hideLocationPicker),s(document).on("click","#woogosend-btn--map-cancel",d.hideLocationPicker),s(document).off("click","#woogosend-btn--map-apply",d.applyLocationPicker),s(document).on("click","#woogosend-btn--map-apply",d.applyLocationPicker),s(document).off("click","#woogosend-map-search-panel-toggle",d.toggleMapSearch),s(document).on("click","#woogosend-map-search-panel-toggle",d.toggleMapSearch)},validateAPIKeyBothSide:function(e){d.validateAPIKeyServerSide(e,d.validateAPIKeyBrowserSide)},validateAPIKeyBrowserSide:function(n){d.apiKeyError="",d.initMap(n.val(),function(){var e={latLng:new google.maps.LatLng(parseFloat(d.params.defaultLat),parseFloat(d.params.defaultLng))};(new google.maps.Geocoder).geocode(e,function(e,o){"ok"===o.toLowerCase()&&(console.log("validateAPIKeyBrowserSide",e),n.addClass("valid"),setTimeout(function(){n.removeClass("editing loading valid")},2e3))}),clearInterval(d.apiKeyErrorCheckInterval),d.apiKeyErrorCheckInterval=setInterval(function(){(n.hasClass("valid")||d.apiKeyError)&&clearInterval(d.apiKeyErrorCheckInterval),d.apiKeyError&&(d.showError(n,d.apiKeyError),n.prop("readonly",!1).removeClass("loading"))},300)})},validateAPIKeyServerSide:function(o,n){s.ajax({method:"POST",url:d.params.ajax_url,data:{action:"woogosend_validate_api_key_server",nonce:d.params.validate_api_key_nonce,key:o.val()}}).done(function(e){console.log("validateAPIKeyServerSide",e),"function"==typeof n?n(o):(o.addClass("valid"),setTimeout(function(){o.removeClass("editing loading valid")},2e3))}).fail(function(e){e.responseJSON&&e.responseJSON.data?d.showError(o,e.responseJSON.data):e.statusText?d.showError(o,e.statusText):d.showError(o,"Google Distance Matrix API error: Uknown"),o.prop("readonly",!1).removeClass("loading")})},showError:function(e,o){s('<div class="error notice woogosend-error-box"><p>'+d.convertError(o)+"</p></div>").hide().appendTo(e.closest("td")).slideDown()},removeError:function(e){e.closest("td").find(".woogosend-error-box").remove()},convertError:function(e){return e.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>")},handleApiKeyInput:function(e){var o=s(e.currentTarget);o.val()===o.data("value")?o.removeClass("editing").next(".woogosend-edit-api-key").removeClass("editing"):o.addClass("editing").next(".woogosend-edit-api-key").addClass("editing"),d.removeError(o)},editApiKey:function(e){e.preventDefault();var o=s(this).blur().prev("input");o.hasClass("editing")&&!o.hasClass("loading")&&(o.prop("readonly",!0).addClass("loading"),"api_key"===o.attr("data-key")?d.validateAPIKeyServerSide(o):d.validateAPIKeyBrowserSide(o),d.removeError(o))},showLocationPicker:function(e){e.preventDefault(),s(this).blur(),d.apiKeyError="";var o=s("#woocommerce_woogosend_api_key_picker").val();if(d.isEditingAPIKey())return window.alert(i("finish_editing_api"));if(!o.length)return window.alert(i("api_key_picker_empty"));s(".modal-close-link").hide(),t({btn_left:{id:"map-cancel",label:a("buttons.Cancel"),icon:"undo"},btn_right:{id:"map-apply",label:a("buttons.Apply Changes"),icon:"editor-spellcheck"}}),s("#woogosend-field-group-wrap--location_picker").fadeIn().siblings().hide();var n=s("#woogosend-field-group-wrap--location_picker").find(".wc-settings-sub-title").first().addClass("woogosend-hidden");s(".wc-backbone-modal-header").find("h1").append("<span>"+n.text()+"</span>"),d.initMap(o,d.renderMap)},hideLocationPicker:function(e){e.preventDefault(),d.destroyMap(),s(".modal-close-link").show(),t(),s("#woogosend-field-group-wrap--location_picker").find(".wc-settings-sub-title").first().removeClass("woogosend-hidden"),s(".wc-backbone-modal-header").find("h1 span").remove(),s("#woogosend-field-group-wrap--location_picker").hide().siblings().not(".woogosend-hidden").fadeIn()},applyLocationPicker:function(e){e.preventDefault(),d.apiKeyError||(s("#woocommerce_woogosend_origin_lat").val(d.origin_lat),s("#woocommerce_woogosend_origin_lng").val(d.origin_lng),s("#woocommerce_woogosend_origin_address").val(d.origin_address)),d.hideLocationPicker(e)},toggleMapSearch:function(e){e.preventDefault(),s("#woogosend-map-search-panel").toggleClass("expanded")},initMap:function(e,o){d.destroyMap(),_.isEmpty(e)&&(e="InvalidKey"),s.getScript("https://maps.googleapis.com/maps/api/js?libraries=geometry,places&key="+e,o)},renderMap:function(){d.origin_lat=s("#woocommerce_woogosend_origin_lat").val(),d.origin_lng=s("#woocommerce_woogosend_origin_lng").val();var e={lat:_.isEmpty(d.origin_lat)?parseFloat(d.params.defaultLat):parseFloat(d.origin_lat),lng:_.isEmpty(d.origin_lng)?parseFloat(d.params.defaultLng):parseFloat(d.origin_lng)},n=new google.maps.Map(document.getElementById("woogosend-map-canvas"),{mapTypeId:"roadmap",center:e,zoom:d.zoomLevel,streetViewControl:!1,mapTypeControl:!1}),t=new google.maps.Marker({map:n,position:e,draggable:!0,icon:d.params.marker}),a=new google.maps.InfoWindow({maxWidth:350});_.isEmpty(d.origin_lat)||_.isEmpty(d.origin_lng)?(a.setContent(d.params.i18n.drag_marker),a.open(n,t)):d.setLatLng(t.position,t,n,a),google.maps.event.addListener(t,"dragstart",function(){a.close()}),google.maps.event.addListener(t,"dragend",function(e){d.setLatLng(e.latLng,t,n,a)}),s("#woogosend-map-wrap").prepend(wp.template("woogosend-map-search-panel")()),n.controls[google.maps.ControlPosition.TOP_LEFT].push(document.getElementById("woogosend-map-search-panel"));var i=new google.maps.places.SearchBox(document.getElementById("woogosend-map-search-input"));n.addListener("bounds_changed",function(){i.setBounds(n.getBounds())});var r=[];i.addListener("places_changed",function(){var e=i.getPlaces();if(0!==e.length){r.forEach(function(e){e.setMap(null)}),r=[];var o=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(t=new google.maps.Marker({map:n,position:e.geometry.location,draggable:!0,icon:d.params.marker}),d.setLatLng(e.geometry.location,t,n,a),google.maps.event.addListener(t,"dragstart",function(){a.close()}),google.maps.event.addListener(t,"dragend",function(e){d.setLatLng(e.latLng,t,n,a)}),r.push(t),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)):console.log("Returned place contains no geometry")}),n.fitBounds(o)}}),setTimeout(function(){s("#woogosend-map-search-panel").removeClass("woogosend-hidden")},500)},destroyMap:function(){window.google&&(window.google=void 0),s("#woogosend-map-canvas").empty(),s("#woogosend-map-search-panel").remove()},setLatLng:function(t,a,i,r){(new google.maps.Geocoder).geocode({latLng:t},function(e,o){if(o===google.maps.GeocoderStatus.OK&&e[0]){var n=[d.params.i18n.latitude+": "+t.lat().toString(),d.params.i18n.longitude+": "+t.lng().toString()];r.setContent(n.join("<br />")),r.open(i,a),a.addListener("click",function(){r.open(i,a)}),s("#woogosend-map-search-input").val(e[0].formatted_address),d.origin_lat=t.lat(),d.origin_lng=t.lng(),d.origin_address=e[0].formatted_address}}),i.setCenter(t)},isEditingAPIKey:function(){return 0<s('[data-link="api_key"].editing').length}},o={renderForm:function(){if(s("#woocommerce_woogosend_origin_type")&&s("#woocommerce_woogosend_origin_type").length){s(document).off("click","#woogosend-btn--save-settings",o.submitForm),s(document).on("click","#woogosend-btn--save-settings",o.submitForm),s(document).off("change","#woocommerce_woogosend_origin_type",o.toggleStoreOriginFields),s(document).on("change","#woocommerce_woogosend_origin_type",o.toggleStoreOriginFields),s("#woocommerce_woogosend_origin_type").trigger("change"),s(".wc-modal-shipping-method-settings table.form-table").each(function(){var e=s(this);e.find("tr").length||e.remove()}),s(".woogosend-field-group").each(function(){var e=s(this),o=e.attr("id").replace("woocommerce_woogosend_field_group_",""),n=e.next("p").detach(),t=e.nextAll("table.form-table").first().attr("id","woogosend-table--"+o).addClass("woogosend-table woogosend-table--"+o).detach();e.wrap('<div id="woogosend-field-group-wrap--'+o+'" class="woogosend-field-group-wrap stuffbox woogosend-field-group-wrap--'+o+'"></div>'),n.appendTo("#woogosend-field-group-wrap--"+o),t.appendTo("#woogosend-field-group-wrap--"+o),t&&t.length?e.hasClass("woogosend-field-group-hidden")&&s("#woogosend-field-group-wrap--"+o).addClass("woogosend-hidden"):s("#woogosend-field-group-wrap--"+o).remove()}),s(".woogosend-field").each(function(){var e=s(this),o=e.attr("data-unit");o&&(e.next(".woogosend-field-unit").remove(),e.after('<span class="woogosend-field-unit">'+o+"</span>"))});var e=_.mapObject(woogosend_backend,function(e,o){switch(o){case"default_lat":case"default_lng":case"test_destination_lat":case"test_destination_lng":return parseFloat(e);default:return e}});d.init(e),t()}},maybeOpenModal:function(){woogosend_backend.showSettings&&setTimeout(function(){for(var e=!1,o=s(document).find(".wc-shipping-zone-method-type"),n=0;n<o.length;n++){var t=o[n];if(s(t).text()===woogosend_backend.methodTitle)return s(t).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(e=!0)}e||(s(".wc-shipping-zone-add-method").trigger("click"),s('select[name="add_method_id"]').val(woogosend_backend.methodId).trigger("change"))},500)},submitForm:function(e){e.preventDefault(),d.isEditingAPIKey()?window.alert(i("finish_editing_api")):s("#btn-ok").trigger("click")},toggleStoreOriginFields:function(e){e.preventDefault();var n=s(this).val(),o=s(this).data("fields");_.each(o,function(e,o){_.each(e,function(e){o!==n?s("#"+e).closest("tr").hide():s("#"+e).closest("tr").show()})})},initForm:function(){s(document.body).off("wc_backbone_modal_loaded",o.renderForm),s(document.body).on("wc_backbone_modal_loaded",o.renderForm)},init:function(){o.initForm(),o.maybeOpenModal()}};s(document).ready(o.init)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvb2dvc2VuZC1iYWNrZW5kLm1pbi5qcyJdLCJuYW1lcyI6WyIkIiwid29vZ29zZW5kVG9nZ2xlQnV0dG9ucyIsImFyZ3MiLCJ3aGVuIiwicmVtb3ZlIiwidGhlbiIsImhpZGUiLCJhZnRlciIsIndwIiwidGVtcGxhdGUiLCJidXR0b25EZWZhdWx0IiwiYnRuX3JpZ2h0IiwiaWQiLCJpY29uIiwibGFiZWwiLCJ3b29nb3NlbmRJMThuIiwid29vZ29zZW5kR2V0QnV0dG9ucyIsIndvb2dvc2VuZE9iamVjdCIsIm9iaiIsInBhdGgiLCJkZWYiLCJzcGxpdCIsImN1cnJlbnQiLCJpIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwid29vZ29zZW5kX2JhY2tlbmQiLCJpMThuIiwid29vZ29zZW5kRXJyb3IiLCJlcnJvcnMiLCJ3IiwiQSIsIkYiLCJPIiwiY29uc29sZU1ldGhvZHMiLCJmaXhDb25zb2xlTWV0aG9kIiwiY29uc29sZU9uIiwiYWxsSGFuZGxlcnMiLCJtZXRob2RPYmoiLCJlbXB0eSIsIm1ldGhvZE5hbWUiLCJvbGQiLCJhcmdzRm9yQWxsIiwiaiIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImhhbmRsZXJzIiwiYXBwbHkiLCJwdXNoIiwiY3VyIiwiY2FsbGJhY2siLCJrZXkiLCJ0b1N0cmluZyIsIkNvbnNvbGVMaXN0ZW5lciIsIm9uIiwidGhpcyIsIndvb2dvc2VuZE1hcFBpY2tlciIsInBhcmFtcyIsIm9yaWdpbl9sYXQiLCJvcmlnaW5fbG5nIiwib3JpZ2luX2FkZHJlc3MiLCJ6b29tTGV2ZWwiLCJhcGlLZXlFcnJvckNoZWNrSW50ZXJ2YWwiLCJhcGlLZXlFcnJvciIsImVkaXRpbmdBUElLZXkiLCJpbml0IiwiZXJyb3JNZXNzYWdlIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwicmVwbGFjZVdpdGgiLCJjb252ZXJ0RXJyb3IiLCJlYWNoIiwiaHJlZiIsImNsYXNzIiwidGV4dCIsImRvY3VtZW50Iiwib2ZmIiwicHJvcCIsImhhc0NsYXNzIiwiZGF0YSIsInZhbCIsInVuZGVmaW5lZCIsImhhbmRsZUFwaUtleUlucHV0IiwiZWRpdEFwaUtleSIsInRyaWdnZXIiLCJzaG93TG9jYXRpb25QaWNrZXIiLCJoaWRlTG9jYXRpb25QaWNrZXIiLCJhcHBseUxvY2F0aW9uUGlja2VyIiwidG9nZ2xlTWFwU2VhcmNoIiwidmFsaWRhdGVBUElLZXlCb3RoU2lkZSIsIiRpbnB1dCIsInZhbGlkYXRlQVBJS2V5U2VydmVyU2lkZSIsInZhbGlkYXRlQVBJS2V5QnJvd3NlclNpZGUiLCJpbml0TWFwIiwiZ2VvY29kZXJBcmdzIiwibGF0TG5nIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsInBhcnNlRmxvYXQiLCJkZWZhdWx0TGF0IiwiZGVmYXVsdExuZyIsIkdlb2NvZGVyIiwiZ2VvY29kZSIsInJlc3VsdHMiLCJzdGF0dXMiLCJhZGRDbGFzcyIsInNldFRpbWVvdXQiLCJyZW1vdmVDbGFzcyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInNob3dFcnJvciIsIm9uU3VjY2VzcyIsImFqYXgiLCJtZXRob2QiLCJ1cmwiLCJhamF4X3VybCIsImFjdGlvbiIsIm5vbmNlIiwidmFsaWRhdGVfYXBpX2tleV9ub25jZSIsImRvbmUiLCJyZXNwb25zZSIsImZhaWwiLCJyZXNwb25zZUpTT04iLCJzdGF0dXNUZXh0IiwiYXBwZW5kVG8iLCJjbG9zZXN0Iiwic2xpZGVEb3duIiwicmVtb3ZlRXJyb3IiLCJmaW5kIiwicmVwbGFjZSIsImUiLCJjdXJyZW50VGFyZ2V0IiwibmV4dCIsInByZXZlbnREZWZhdWx0IiwiYmx1ciIsInByZXYiLCJhdHRyIiwiZXZlbnQiLCJhcGlfa2V5X3BpY2tlciIsImlzRWRpdGluZ0FQSUtleSIsIndpbmRvdyIsImFsZXJ0IiwiYnRuX2xlZnQiLCJmYWRlSW4iLCJzaWJsaW5ncyIsIiRzdWJUaXRsZSIsImZpcnN0IiwiYXBwZW5kIiwicmVuZGVyTWFwIiwiZGVzdHJveU1hcCIsInNob3ciLCJub3QiLCJ0b2dnbGVDbGFzcyIsImFwaUtleSIsIl8iLCJpc0VtcHR5IiwiZ2V0U2NyaXB0IiwiY3VycmVudExhdExuZyIsImxhdCIsImxuZyIsIm1hcCIsIk1hcCIsImdldEVsZW1lbnRCeUlkIiwibWFwVHlwZUlkIiwiY2VudGVyIiwiem9vbSIsInN0cmVldFZpZXdDb250cm9sIiwibWFwVHlwZUNvbnRyb2wiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImRyYWdnYWJsZSIsImluZm93aW5kb3ciLCJJbmZvV2luZG93IiwibWF4V2lkdGgiLCJzZXRDb250ZW50IiwiZHJhZ19tYXJrZXIiLCJvcGVuIiwic2V0TGF0TG5nIiwiYWRkTGlzdGVuZXIiLCJjbG9zZSIsInByZXBlbmQiLCJjb250cm9scyIsIkNvbnRyb2xQb3NpdGlvbiIsIlRPUF9MRUZUIiwibWFwU2VhcmNoQm94IiwicGxhY2VzIiwiU2VhcmNoQm94Iiwic2V0Qm91bmRzIiwiZ2V0Qm91bmRzIiwibWFya2VycyIsImdldFBsYWNlcyIsImZvckVhY2giLCJzZXRNYXAiLCJib3VuZHMiLCJMYXRMbmdCb3VuZHMiLCJwbGFjZSIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJ2aWV3cG9ydCIsInVuaW9uIiwiZXh0ZW5kIiwiZml0Qm91bmRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsImluZm93aW5kb3dDb250ZW50cyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiam9pbiIsImZvcm1hdHRlZF9hZGRyZXNzIiwic2V0Q2VudGVyIiwid29vZ29zZW5kQmFja2VuZCIsInJlbmRlckZvcm0iLCJzdWJtaXRGb3JtIiwidG9nZ2xlU3RvcmVPcmlnaW5GaWVsZHMiLCIkdGFibGUiLCIkZmllbGRHcm91cCIsImZpZWxkR3JvdXBJZCIsIiRmaWVsZEdyb3VwRGVzY3JpcHRpb24iLCJkZXRhY2giLCIkZmllbGRHcm91cFRhYmxlIiwibmV4dEFsbCIsIndyYXAiLCIkZmllbGQiLCJmaWVsZFVuaXQiLCJtYXBPYmplY3QiLCJtYXliZU9wZW5Nb2RhbCIsInNob3dTZXR0aW5ncyIsImlzTWV0aG9kQWRkZWQiLCJtZXRob2RzIiwibWV0aG9kVGl0bGUiLCJtZXRob2RJZCIsInNlbGVjdGVkIiwiZmllbGRzIiwiZmllbGRJZHMiLCJmaWVsZFZhbHVlIiwiZmllbGRJZCIsImluaXRGb3JtIiwiYm9keSIsInJlYWR5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFTQSxHQWtCVixTQUFTQyxFQUF1QkMsR0FDL0JGLEVBQUVHLEtBQUtILEVBQUUsc0JBQXNCSSxVQUFVQyxLQUFLLFdBQzdDTCxFQUFFLFdBQVdNLE9BQU9DLE1BQU1DLEdBQUdDLFNBQVMsb0JBQVpELENBSTVCLFNBQTZCTixHQUM1QixJQUFJUSxFQUFnQixDQUNuQkMsVUFBVyxDQUNWQyxHQUFJLGdCQUNKQyxLQUFNLE1BQ05DLE1BQU9DLEVBQWMsMEJBSXZCLE9BQUtiLEdBQ0dRLEVBZG9ETSxDQUFvQmQsT0FvQmpGLFNBQVNlLEVBQWdCQyxFQUFLQyxFQUFNQyxHQUNmLGlCQUFURCxJQUNWQSxFQUFPQSxFQUFLRSxNQUFNLE1BR25CLElBS0MsSUFIQSxJQUFJQyxFQUFVSixFQUdMSyxFQUFJLEVBQUdBLEVBQUlKLEVBQUtLLE9BQVFELElBQ2hDRCxFQUFVQSxFQUFRSCxFQUFLSSxJQUd4QixPQUFPRCxFQUNOLE1BQU9HLEdBR1IsT0FGQUMsUUFBUUMsSUFBSSxrQkFBbUJGLEdBRXhCTCxHQUlULFNBQVNMLEVBQWNJLEVBQU1DLEdBQzVCLE9BQU9ILEVBQWdCVyxrQkFBa0JDLEtBQU1WLEVBQU1DLEdBR3RELFNBQVNVLEVBQWVYLEVBQU1DLEdBQzdCLE9BQU9ILEVBQWdCVyxrQkFBa0JDLEtBQUtFLE9BQVFaLEVBQU1DLElBdU01RCxTQUFVWSxHQUNULGFBRUEsSUFBSUMsRUFBR0MsRUFBR0MsRUFBR0MsRUFBZ0JDLEVBQWtCQyxFQUM3Q0MsRUFBYUMsRUF3QkhDLEVBdEJaUixFQUFJLEdBQ0pDLEVBQUksYUFDSkMsRUFBSSxHQUdKQyxFQUFpQixDQUNmLFNBQVUsUUFBUyxRQUFTLFFBQzVCLE1B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LFNBQVUsV0FFVGpQLEVBQUU4RSxTQUFTb0ssTUFBTW5LLElBQUksMkJBQTRCd0ksRUFBaUJDLFlBQ2xFeE4sRUFBRThFLFNBQVNvSyxNQUFNekwsR0FBRywyQkFBNEI4SixFQUFpQkMsYUFFbEVwSixLQUFNLFdBQ0xtSixFQUFpQjBCLFdBQ2pCMUIsRUFBaUJlLG1CQUluQnRPLEVBQUU4RSxVQUFVcUssTUFBTTVCLEVBQWlCbkosTUF4OEJuQyxDQXk4QkVnTCIsImZpbGUiOiJ3b29nb3NlbmQtYmFja2VuZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCkge1xuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuLy8gTiBtaWxsaXNlY29uZHMuXG5mdW5jdGlvbiB3b29nb3NlbmREZWJvdW5jZShmdW5jLCB3YWl0KSB7XG5cdHZhciB0aW1lb3V0O1xuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBjb250ZXh0ID0gdGhpcztcblx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0fTtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiB3b29nb3NlbmRUb2dnbGVCdXR0b25zKGFyZ3MpIHtcblx0JC53aGVuKCQoJyN3b29nb3NlbmQtYnV0dG9ucycpLnJlbW92ZSgpKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHQkKCcjYnRuLW9rJykuaGlkZSgpLmFmdGVyKHdwLnRlbXBsYXRlKCd3b29nb3NlbmQtYnV0dG9ucycpKHdvb2dvc2VuZEdldEJ1dHRvbnMoYXJncykpKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHdvb2dvc2VuZEdldEJ1dHRvbnMoYXJncykge1xuXHR2YXIgYnV0dG9uRGVmYXVsdCA9IHtcblx0XHRidG5fcmlnaHQ6IHtcblx0XHRcdGlkOiAnc2F2ZS1zZXR0aW5ncycsXG5cdFx0XHRpY29uOiAneWVzJyxcblx0XHRcdGxhYmVsOiB3b29nb3NlbmRJMThuKCdidXR0b25zLlNhdmUgQ2hhbmdlcycpLFxuXHRcdH0sXG5cdH07XG5cblx0aWYgKCFhcmdzKSB7XG5cdFx0cmV0dXJuIGJ1dHRvbkRlZmF1bHQ7XG5cdH1cblxuXHRyZXR1cm4gYXJncztcbn1cblxuZnVuY3Rpb24gd29vZ29zZW5kT2JqZWN0KG9iaiwgcGF0aCwgZGVmKSB7XG5cdGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0XHRwYXRoID0gcGF0aC5zcGxpdCgnLicpO1xuXHR9XG5cblx0dHJ5IHtcblx0XHQvLyBDYWNoZSB0aGUgY3VycmVudCBvYmplY3Rcblx0XHR2YXIgY3VycmVudCA9IG9iajtcblxuXHRcdC8vIEZvciBlYWNoIGl0ZW0gaW4gdGhlIHBhdGgsIGRpZyBpbnRvIHRoZSBvYmplY3Rcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcblx0XHRcdGN1cnJlbnQgPSBjdXJyZW50W3BhdGhbaV1dO1xuXHRcdH1cblxuXHRcdHJldHVybiBjdXJyZW50O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUubG9nKCd3b29nb3NlbmRPYmplY3QnLCBlcnJvcik7XG5cblx0XHRyZXR1cm4gZGVmO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdvb2dvc2VuZEkxOG4ocGF0aCwgZGVmKSB7XG5cdHJldHVybiB3b29nb3NlbmRPYmplY3Qod29vZ29zZW5kX2JhY2tlbmQuaTE4biwgcGF0aCwgZGVmKTtcbn1cblxuZnVuY3Rpb24gd29vZ29zZW5kRXJyb3IocGF0aCwgZGVmKSB7XG5cdHJldHVybiB3b29nb3NlbmRPYmplY3Qod29vZ29zZW5kX2JhY2tlbmQuaTE4bi5lcnJvcnMsIHBhdGgsIGRlZik7XG59XG5cbmZ1bmN0aW9uIHdvb2dvc2VuZFNwcmludGYoKSB7XG5cdC8vICBkaXNjdXNzIGF0OiBodHRwczovL2xvY3V0dXMuaW8vcGhwL3NwcmludGYvXG5cdC8vIG9yaWdpbmFsIGJ5OiBBc2ggU2VhcmxlIChodHRwczovL2hleG1lbi5jb20vYmxvZy8pXG5cdC8vIGltcHJvdmVkIGJ5OiBNaWNoYWVsIFdoaXRlIChodHRwczovL2dldHNwcmluay5jb20pXG5cdC8vIGltcHJvdmVkIGJ5OiBKYWNrXG5cdC8vIGltcHJvdmVkIGJ5OiBLZXZpbiB2YW4gWm9ubmV2ZWxkIChodHRwczovL2t2ei5pbylcblx0Ly8gaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHBzOi8va3Z6LmlvKVxuXHQvLyBpbXByb3ZlZCBieTogS2V2aW4gdmFuIFpvbm5ldmVsZCAoaHR0cHM6Ly9rdnouaW8pXG5cdC8vIGltcHJvdmVkIGJ5OiBEalxuXHQvLyBpbXByb3ZlZCBieTogQWxsaWR5bGxzXG5cdC8vICAgIGlucHV0IGJ5OiBQYXVsbyBGcmVpdGFzXG5cdC8vICAgIGlucHV0IGJ5OiBCcmV0dCBaYW1pciAoaHR0cHM6Ly9icmV0dC16YW1pci5tZSlcblx0Ly8gaW1wcm92ZWQgYnk6IFJhZmHFgiBLdWthd3NraSAoaHR0cHM6Ly9rdWthd3NraS5wbClcblx0Ly8gICBleGFtcGxlIDE6IHNwcmludGYoXCIlMDEuMmZcIiwgMTIzLjEpXG5cdC8vICAgcmV0dXJucyAxOiAnMTIzLjEwJ1xuXHQvLyAgIGV4YW1wbGUgMjogc3ByaW50ZihcIlslMTBzXVwiLCAnbW9ua2V5Jylcblx0Ly8gICByZXR1cm5zIDI6ICdbICAgIG1vbmtleV0nXG5cdC8vICAgZXhhbXBsZSAzOiBzcHJpbnRmKFwiWyUnIzEwc11cIiwgJ21vbmtleScpXG5cdC8vICAgcmV0dXJucyAzOiAnWyMjIyNtb25rZXldJ1xuXHQvLyAgIGV4YW1wbGUgNDogc3ByaW50ZihcIiVkXCIsIDEyMzQ1Njc4OTAxMjM0NSlcblx0Ly8gICByZXR1cm5zIDQ6ICcxMjM0NTY3ODkwMTIzNDUnXG5cdC8vICAgZXhhbXBsZSA1OiBzcHJpbnRmKCclLTAzcycsICdFJylcblx0Ly8gICByZXR1cm5zIDU6ICdFMDAnXG5cdC8vICAgZXhhbXBsZSA2OiBzcHJpbnRmKCclKzAxMGQnLCA5KVxuXHQvLyAgIHJldHVybnMgNjogJyswMDAwMDAwMDknXG5cdC8vICAgZXhhbXBsZSA3OiBzcHJpbnRmKCclKzBcXCdAMTBkJywgOSlcblx0Ly8gICByZXR1cm5zIDc6ICdAQEBAQEBAQCs5J1xuXHQvLyAgIGV4YW1wbGUgODogc3ByaW50ZignJS5mJywgMy4xNClcblx0Ly8gICByZXR1cm5zIDg6ICczLjE0MDAwMCdcblx0Ly8gICBleGFtcGxlIDk6IHNwcmludGYoJyUlICUyJGQnLCAxLCAyKVxuXHQvLyAgIHJldHVybnMgOTogJyUgMidcblxuXHR2YXIgcmVnZXggPSAvJSV8JSg/OihcXGQrKVxcJCk/KCg/OlstKyMwIF18J1tcXHNcXFNdKSopKFxcZCspPyg/OlxcLihcXGQqKSk/KFtcXHNcXFNdKS9nXG5cdHZhciBhcmdzID0gYXJndW1lbnRzXG5cdHZhciBpID0gMFxuXHR2YXIgZm9ybWF0ID0gYXJnc1tpKytdXG5cblx0dmFyIF9wYWQgPSBmdW5jdGlvbiAoc3RyLCBsZW4sIGNociwgbGVmdEp1c3RpZnkpIHtcblx0XHRpZiAoIWNocikge1xuXHRcdFx0Y2hyID0gJyAnXG5cdFx0fVxuXHRcdHZhciBwYWRkaW5nID0gKHN0ci5sZW5ndGggPj0gbGVuKSA/ICcnIDogbmV3IEFycmF5KDEgKyBsZW4gLSBzdHIubGVuZ3RoID4+PiAwKS5qb2luKGNocilcblx0XHRyZXR1cm4gbGVmdEp1c3RpZnkgPyBzdHIgKyBwYWRkaW5nIDogcGFkZGluZyArIHN0clxuXHR9XG5cblx0dmFyIGp1c3RpZnkgPSBmdW5jdGlvbiAodmFsdWUsIHByZWZpeCwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwYWRDaGFyKSB7XG5cdFx0dmFyIGRpZmYgPSBtaW5XaWR0aCAtIHZhbHVlLmxlbmd0aFxuXHRcdGlmIChkaWZmID4gMCkge1xuXHRcdFx0Ly8gd2hlbiBwYWRkaW5nIHdpdGggemVyb3Ncblx0XHRcdC8vIG9uIHRoZSBsZWZ0IHNpZGVcblx0XHRcdC8vIGtlZXAgc2lnbiAoKyBvciAtKSBpbiBmcm9udFxuXHRcdFx0aWYgKCFsZWZ0SnVzdGlmeSAmJiBwYWRDaGFyID09PSAnMCcpIHtcblx0XHRcdFx0dmFsdWUgPSBbXG5cdFx0XHRcdFx0dmFsdWUuc2xpY2UoMCwgcHJlZml4Lmxlbmd0aCksXG5cdFx0XHRcdFx0X3BhZCgnJywgZGlmZiwgJzAnLCB0cnVlKSxcblx0XHRcdFx0XHR2YWx1ZS5zbGljZShwcmVmaXgubGVuZ3RoKVxuXHRcdFx0XHRdLmpvaW4oJycpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWx1ZSA9IF9wYWQodmFsdWUsIG1pbldpZHRoLCBwYWRDaGFyLCBsZWZ0SnVzdGlmeSlcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlXG5cdH1cblxuXHR2YXIgX2Zvcm1hdEJhc2VYID0gZnVuY3Rpb24gKHZhbHVlLCBiYXNlLCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgcGFkQ2hhcikge1xuXHRcdC8vIE5vdGU6IGNhc3RzIG5lZ2F0aXZlIG51bWJlcnMgdG8gcG9zaXRpdmUgb25lc1xuXHRcdHZhciBudW1iZXIgPSB2YWx1ZSA+Pj4gMFxuXHRcdHZhbHVlID0gX3BhZChudW1iZXIudG9TdHJpbmcoYmFzZSksIHByZWNpc2lvbiB8fCAwLCAnMCcsIGZhbHNlKVxuXHRcdHJldHVybiBqdXN0aWZ5KHZhbHVlLCAnJywgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwYWRDaGFyKVxuXHR9XG5cblx0Ly8gX2Zvcm1hdFN0cmluZygpXG5cdHZhciBfZm9ybWF0U3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlLCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgY3VzdG9tUGFkQ2hhcikge1xuXHRcdGlmIChwcmVjaXNpb24gIT09IG51bGwgJiYgcHJlY2lzaW9uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgcHJlY2lzaW9uKVxuXHRcdH1cblx0XHRyZXR1cm4ganVzdGlmeSh2YWx1ZSwgJycsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgY3VzdG9tUGFkQ2hhcilcblx0fVxuXG5cdC8vIGRvRm9ybWF0KClcblx0dmFyIGRvRm9ybWF0ID0gZnVuY3Rpb24gKHN1YnN0cmluZywgYXJnSW5kZXgsIG1vZGlmaWVycywgbWluV2lkdGgsIHByZWNpc2lvbiwgc3BlY2lmaWVyKSB7XG5cdFx0dmFyIG51bWJlciwgcHJlZml4LCBtZXRob2QsIHRleHRUcmFuc2Zvcm0sIHZhbHVlXG5cblx0XHRpZiAoc3Vic3RyaW5nID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm4gJyUnXG5cdFx0fVxuXG5cdFx0Ly8gcGFyc2UgbW9kaWZpZXJzXG5cdFx0dmFyIHBhZENoYXIgPSAnICcgLy8gcGFkIHdpdGggc3BhY2VzIGJ5IGRlZmF1bHRcblx0XHR2YXIgbGVmdEp1c3RpZnkgPSBmYWxzZVxuXHRcdHZhciBwb3NpdGl2ZU51bWJlclByZWZpeCA9ICcnXG5cdFx0dmFyIGosIGxcblxuXHRcdGZvciAoaiA9IDAsIGwgPSBtb2RpZmllcnMubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG5cdFx0XHRzd2l0Y2ggKG1vZGlmaWVycy5jaGFyQXQoaikpIHtcblx0XHRcdFx0Y2FzZSAnICc6XG5cdFx0XHRcdGNhc2UgJzAnOlxuXHRcdFx0XHRcdHBhZENoYXIgPSBtb2RpZmllcnMuY2hhckF0KGopXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0Y2FzZSAnKyc6XG5cdFx0XHRcdFx0cG9zaXRpdmVOdW1iZXJQcmVmaXggPSAnKydcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRjYXNlICctJzpcblx0XHRcdFx0XHRsZWZ0SnVzdGlmeSA9IHRydWVcblx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRjYXNlIFwiJ1wiOlxuXHRcdFx0XHRcdGlmIChqICsgMSA8IGwpIHtcblx0XHRcdFx0XHRcdHBhZENoYXIgPSBtb2RpZmllcnMuY2hhckF0KGogKyAxKVxuXHRcdFx0XHRcdFx0aisrXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFtaW5XaWR0aCkge1xuXHRcdFx0bWluV2lkdGggPSAwXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1pbldpZHRoID0gK21pbldpZHRoXG5cdFx0fVxuXG5cdFx0aWYgKCFpc0Zpbml0ZShtaW5XaWR0aCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2lkdGggbXVzdCBiZSBmaW5pdGUnKVxuXHRcdH1cblxuXHRcdGlmICghcHJlY2lzaW9uKSB7XG5cdFx0XHRwcmVjaXNpb24gPSAoc3BlY2lmaWVyID09PSAnZCcpID8gMCA6ICdmRmVFJy5pbmRleE9mKHNwZWNpZmllcikgPiAtMSA/IDYgOiB1bmRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJlY2lzaW9uID0gK3ByZWNpc2lvblxuXHRcdH1cblxuXHRcdGlmIChhcmdJbmRleCAmJiArYXJnSW5kZXggPT09IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgbnVtYmVyIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKVxuXHRcdH1cblxuXHRcdGlmIChhcmdJbmRleCAmJiArYXJnSW5kZXggPj0gYXJncy5sZW5ndGgpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignVG9vIGZldyBhcmd1bWVudHMnKVxuXHRcdH1cblxuXHRcdHZhbHVlID0gYXJnSW5kZXggPyBhcmdzWythcmdJbmRleF0gOiBhcmdzW2krK11cblxuXHRcdHN3aXRjaCAoc3BlY2lmaWVyKSB7XG5cdFx0XHRjYXNlICclJzpcblx0XHRcdFx0cmV0dXJuICclJ1xuXHRcdFx0Y2FzZSAncyc6XG5cdFx0XHRcdHJldHVybiBfZm9ybWF0U3RyaW5nKHZhbHVlICsgJycsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKVxuXHRcdFx0Y2FzZSAnYyc6XG5cdFx0XHRcdHJldHVybiBfZm9ybWF0U3RyaW5nKFN0cmluZy5mcm9tQ2hhckNvZGUoK3ZhbHVlKSwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIHBhZENoYXIpXG5cdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0cmV0dXJuIF9mb3JtYXRCYXNlWCh2YWx1ZSwgMiwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIHBhZENoYXIpXG5cdFx0XHRjYXNlICdvJzpcblx0XHRcdFx0cmV0dXJuIF9mb3JtYXRCYXNlWCh2YWx1ZSwgOCwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwcmVjaXNpb24sIHBhZENoYXIpXG5cdFx0XHRjYXNlICd4Jzpcblx0XHRcdFx0cmV0dXJuIF9mb3JtYXRCYXNlWCh2YWx1ZSwgMTYsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcHJlY2lzaW9uLCBwYWRDaGFyKVxuXHRcdFx0Y2FzZSAnWCc6XG5cdFx0XHRcdHJldHVybiBfZm9ybWF0QmFzZVgodmFsdWUsIDE2LCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgcGFkQ2hhcilcblx0XHRcdFx0XHQudG9VcHBlckNhc2UoKVxuXHRcdFx0Y2FzZSAndSc6XG5cdFx0XHRcdHJldHVybiBfZm9ybWF0QmFzZVgodmFsdWUsIDEwLCBsZWZ0SnVzdGlmeSwgbWluV2lkdGgsIHByZWNpc2lvbiwgcGFkQ2hhcilcblx0XHRcdGNhc2UgJ2knOlxuXHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdG51bWJlciA9ICt2YWx1ZSB8fCAwXG5cdFx0XHRcdC8vIFBsYWluIE1hdGgucm91bmQgZG9lc24ndCBqdXN0IHRydW5jYXRlXG5cdFx0XHRcdG51bWJlciA9IE1hdGgucm91bmQobnVtYmVyIC0gbnVtYmVyICUgMSlcblx0XHRcdFx0cHJlZml4ID0gbnVtYmVyIDwgMCA/ICctJyA6IHBvc2l0aXZlTnVtYmVyUHJlZml4XG5cdFx0XHRcdHZhbHVlID0gcHJlZml4ICsgX3BhZChTdHJpbmcoTWF0aC5hYnMobnVtYmVyKSksIHByZWNpc2lvbiwgJzAnLCBmYWxzZSlcblxuXHRcdFx0XHRpZiAobGVmdEp1c3RpZnkgJiYgcGFkQ2hhciA9PT0gJzAnKSB7XG5cdFx0XHRcdFx0Ly8gY2FuJ3QgcmlnaHQtcGFkIDBzIG9uIGludGVnZXJzXG5cdFx0XHRcdFx0cGFkQ2hhciA9ICcgJ1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBqdXN0aWZ5KHZhbHVlLCBwcmVmaXgsIGxlZnRKdXN0aWZ5LCBtaW5XaWR0aCwgcGFkQ2hhcilcblx0XHRcdGNhc2UgJ2UnOlxuXHRcdFx0Y2FzZSAnRSc6XG5cdFx0XHRjYXNlICdmJzogLy8gQHRvZG86IFNob3VsZCBoYW5kbGUgbG9jYWxlcyAoYXMgcGVyIHNldGxvY2FsZSlcblx0XHRcdGNhc2UgJ0YnOlxuXHRcdFx0Y2FzZSAnZyc6XG5cdFx0XHRjYXNlICdHJzpcblx0XHRcdFx0bnVtYmVyID0gK3ZhbHVlXG5cdFx0XHRcdHByZWZpeCA9IG51bWJlciA8IDAgPyAnLScgOiBwb3NpdGl2ZU51bWJlclByZWZpeFxuXHRcdFx0XHRtZXRob2QgPSBbJ3RvRXhwb25lbnRpYWwnLCAndG9GaXhlZCcsICd0b1ByZWNpc2lvbiddWydlZmcnLmluZGV4T2Yoc3BlY2lmaWVyLnRvTG93ZXJDYXNlKCkpXVxuXHRcdFx0XHR0ZXh0VHJhbnNmb3JtID0gWyd0b1N0cmluZycsICd0b1VwcGVyQ2FzZSddWydlRWZGZ0cnLmluZGV4T2Yoc3BlY2lmaWVyKSAlIDJdXG5cdFx0XHRcdHZhbHVlID0gcHJlZml4ICsgTWF0aC5hYnMobnVtYmVyKVttZXRob2RdKHByZWNpc2lvbilcblx0XHRcdFx0cmV0dXJuIGp1c3RpZnkodmFsdWUsIHByZWZpeCwgbGVmdEp1c3RpZnksIG1pbldpZHRoLCBwYWRDaGFyKVt0ZXh0VHJhbnNmb3JtXSgpXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHQvLyB1bmtub3duIHNwZWNpZmllciwgY29uc3VtZSB0aGF0IGNoYXIgYW5kIHJldHVybiBlbXB0eVxuXHRcdFx0XHRyZXR1cm4gJydcblx0XHR9XG5cdH1cblxuXHR0cnkge1xuXHRcdHJldHVybiBmb3JtYXQucmVwbGFjZShyZWdleCwgZG9Gb3JtYXQpXG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG59XG5cbihmdW5jdGlvbiAodykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIEEsIEYsIE8sIGNvbnNvbGVNZXRob2RzLCBmaXhDb25zb2xlTWV0aG9kLCBjb25zb2xlT24sXG4gICAgYWxsSGFuZGxlcnMsIG1ldGhvZE9iajtcblxuICBBID0gW107XG4gIEYgPSBmdW5jdGlvbiAoKSB7IHJldHVybjsgfTtcbiAgTyA9IHt9O1xuXG4gIC8vIEFsbCBwb3NzaWJsZSBzdGFuZGFyZCBtZXRob2RzIHRvIHByb3ZpZGUgYW4gaW50ZXJmYWNlIGZvclxuICBjb25zb2xlTWV0aG9kcyA9IFtcbiAgICAnYXNzZXJ0JywgJ2NsZWFyJywgJ2NvdW50JywgJ2RlYnVnJyxcbiAgICAnZGlyJywgJ2RpcnhtbCcsICdlcnJvcicsICdleGNlcHRpb24nLFxuICAgICdncm91cCcsICdncm91cENvbGxhcHNlZCcsICdncm91cEVuZCcsXG4gICAgJ2luZm8nLCAnbG9nJywgJ3Byb2ZpbGUnLCAncHJvZmlsZUVuZCcsXG4gICAgJ3RhYmxlJywgJ3RpbWUnLCAndGltZUVuZCcsICd0aW1lU3RhbXAnLFxuICAgICd0cmFjZScsICd3YXJuJ1xuICBdO1xuXG4gIC8vIEhvbGRzIGhhbmRsZXJzIHRvIGJlIGV4ZWN1dGVkIGZvciBldmVyeSBtZXRob2RcbiAgYWxsSGFuZGxlcnMgPSBbXTtcblxuICAvLyBIb2xkcyBoYW5kbGVycyBwZXIgbWV0aG9kXG4gIG1ldGhvZE9iaiA9IHt9O1xuXG4gIC8vIE92ZXJyaWRlcyB0aGUgZXhpc3RpbmcgY29uc29sZSBtZXRob2RzLCB0byBjYWxsIGFueSBzdG9yZWQgaGFuZGxlcnMgZmlyc3RcbiAgZml4Q29uc29sZU1ldGhvZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZ1bmMsIGVtcHR5O1xuXG4gICAgZW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gRjtcbiAgICB9O1xuXG4gICAgaWYgKHcuY29uc29sZSkge1xuICAgICAgLy8gSWYgYGNvbnNvbGVgIGlzIGV2ZW4gYXZhaWxhYmxlXG4gICAgICBmdW5jID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIG9sZDtcbiAgICAgICAgaWYgKG1ldGhvZE5hbWUgaW4gY29uc29sZSAmJiAob2xkID0gY29uc29sZVttZXRob2ROYW1lXSkpIHtcbiAgICAgICAgICAvLyBDaGVja3MgdG8gc2VlIGlmIGBtZXRob2ROYW1lYCBpcyBkZWZpbmVkIG9uIGBjb25zb2xlYCBhbmQgaGFzIHZhbGlkIGZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiAgICAgICAgICAvLyAoYW5kIHN0b3JlcyB0aGUgb2xkIGhhbmRsZXIpXG4gICAgICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgc28gdGhhdCB1bmRlZmluZWQgbWV0aG9kcyBhcmVuJ3QgZmlsbGVkIGluXG4gICAgICAgICAgY29uc29sZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIE92ZXJ3cml0ZXMgY3VycmVudCBjb25zb2xlIG1ldGhvZCB3aXRoIHRoaXMgZnVuY3Rpb25cbiAgICAgICAgICAgIHZhciBhcmdzLCBhcmdzRm9yQWxsLCBpLCBqO1xuICAgICAgICAgICAgLy8gQ29weSBhbGwgYXJndW1lbnRzIHBhc3NlZCB0byBoYW5kbGVyXG4gICAgICAgICAgICBhcmdzID0gQS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBqID0gbWV0aG9kT2JqW21ldGhvZE5hbWVdLmhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAvLyBMb29wIG92ZXIgYWxsIHN0b3JlZCBoYW5kbGVycyBmb3IgdGhpcyBzcGVjaWZpYyBtZXRob2QgYW5kIGNhbGwgdGhlbVxuICAgICAgICAgICAgICBGLmFwcGx5LmNhbGwobWV0aG9kT2JqW21ldGhvZE5hbWVdLmhhbmRsZXJzW2ldLCBjb25zb2xlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGogPSBhbGxIYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgLy8gTG9vcCBvdmVyIGFsbCBzdG9yZWQgaGFuZGxlcnMgZm9yIEFMTCBldmVudHMgYW5kIGNhbGwgdGhlbVxuICAgICAgICAgICAgICBhcmdzRm9yQWxsID0gW21ldGhvZE5hbWVdO1xuICAgICAgICAgICAgICBBLnB1c2guYXBwbHkoYXJnc0ZvckFsbCwgYXJncyk7XG4gICAgICAgICAgICAgIEYuYXBwbHkuY2FsbChhbGxIYW5kbGVyc1tpXSwgY29uc29sZSwgYXJnc0ZvckFsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDYWxscyBvbGRcbiAgICAgICAgICAgIEYuYXBwbHkuY2FsbChvbGQsIGNvbnNvbGUsIGFyZ3MpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnNvbGVbbWV0aG9kTmFtZV0gfHwgZW1wdHk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBmdW5jID0gZW1wdHk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmM7XG4gIH0oKSk7XG5cbiAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzdGFuZGFyZCBjb25zb2xlIG1ldGhvZHMgYW5kIGFkZCBhIHdyYXBwZXIgZnVuY3Rpb24gdGhhdCBjYWxscyBzdG9yZWQgaGFuZGxlcnNcbiAgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSwgaiwgY3VyO1xuICAgIGZvciAoaSA9IDAsIGogPSBjb25zb2xlTWV0aG9kcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdmFsaWQgY29uc29sZSBtZXRob2RzXG4gICAgICBjdXIgPSBjb25zb2xlTWV0aG9kc1tpXTtcbiAgICAgIG1ldGhvZE9ialtjdXJdID0ge1xuICAgICAgICBoYW5kbGVyczogW11cbiAgICAgIH07XG4gICAgICBmaXhDb25zb2xlTWV0aG9kKGN1cik7XG4gICAgfVxuICB9KCkpO1xuXG4gIC8vIE1haW4gaGFuZGxlciBleHBvc2VkXG4gIGNvbnNvbGVPbiA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBrZXksIGN1cjtcbiAgICBpZiAoTy50b1N0cmluZy5jYWxsKG1ldGhvZE5hbWUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgLy8gT2JqZWN0IGxpdGVyYWwgcHJvdmlkZWQgYXMgZmlyc3QgYXJndW1lbnRcbiAgICAgIGZvciAoa2V5IGluIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBrZXlzIGluIG9iamVjdCBsaXRlcmFsXG4gICAgICAgIGN1ciA9IG1ldGhvZE5hbWVba2V5XTtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAvLyBJZiB0YXJnZXRpbmcgYWxsIGV2ZW50c1xuICAgICAgICAgIGFsbEhhbmRsZXJzLnB1c2goY3VyKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgaW4gbWV0aG9kT2JqKSB7XG4gICAgICAgICAgLy8gSWYgdGFyZ2V0aW5nIHNwZWNpZmljIHZhbGlkIGV2ZW50XG4gICAgICAgICAgbWV0aG9kT2JqW2tleV0uaGFuZGxlcnMucHVzaChjdXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gRnVuY3Rpb24gcHJvdmlkZWQgYXMgZmlyc3QgYXJndW1lbnRcbiAgICAgIGFsbEhhbmRsZXJzLnB1c2gobWV0aG9kTmFtZSk7XG4gICAgfSBlbHNlIGlmIChtZXRob2ROYW1lIGluIG1ldGhvZE9iaikge1xuICAgICAgLy8gVmFsaWQgU3RyaW5nIGV2ZW50IHByb3ZpZGVkXG4gICAgICBtZXRob2RPYmpbbWV0aG9kTmFtZV0uaGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEFjdHVhbGx5IGV4cG9zZSBhbiBpbnRlcmZhY2VcbiAgdy5Db25zb2xlTGlzdGVuZXIgPSB7XG4gICAgb246IGNvbnNvbGVPblxuICB9O1xufSh0aGlzKSk7XG5cbi8qKlxuICogTWFwIFBpY2tlclxuICovXG52YXIgd29vZ29zZW5kTWFwUGlja2VyID0ge1xuXHRwYXJhbXM6IHt9LFxuXHRvcmlnaW5fbGF0OiAnJyxcblx0b3JpZ2luX2xuZzogJycsXG5cdG9yaWdpbl9hZGRyZXNzOiAnJyxcblx0em9vbUxldmVsOiAxNixcblx0YXBpS2V5RXJyb3JDaGVja0ludGVydmFsOiBudWxsLFxuXHRhcGlLZXlFcnJvcjogJycsXG5cdGVkaXRpbmdBUElLZXk6IGZhbHNlLFxuXHRpbml0OiBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdFx0d29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcyA9IHBhcmFtcztcblx0XHR3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3IgPSAnJztcblx0XHR3b29nb3NlbmRNYXBQaWNrZXIuZWRpdGluZ0FQSUtleSA9IGZhbHNlO1xuXG5cdFx0Q29uc29sZUxpc3RlbmVyLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcblx0XHRcdGlmIChlcnJvck1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdnb29nbGUnKSAhPT0gLTEpIHtcblx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLmFwaUtleUVycm9yID0gZXJyb3JNZXNzYWdlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoJCgnLmdtLWVyci1tZXNzYWdlJykubGVuZ3RoKSB7XG5cdFx0XHRcdCQoJy5nbS1lcnItbWVzc2FnZScpLnJlcGxhY2VXaXRoKCc8cCBzdHlsZT1cInRleHQtYWxpZ246Y2VudGVyXCI+JyArIHdvb2dvc2VuZE1hcFBpY2tlci5jb252ZXJ0RXJyb3IoZXJyb3JNZXNzYWdlKSArICc8L3A+Jyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCdbZGF0YS1saW5rPVwiYXBpX2tleVwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5hZnRlcih3cC50ZW1wbGF0ZSgnd29vZ29zZW5kLWJ1dHRvbicpKHtcblx0XHRcdFx0aHJlZjogJyMnLFxuXHRcdFx0XHRjbGFzczogJ3dvb2dvc2VuZC1idXR0b25zLS1oYXMtaWNvbiB3b29nb3NlbmQtYXBpLWtleS1idXR0b24nLFxuXHRcdFx0XHR0ZXh0OiAnPHNwYW4gY2xhc3M9XCJkYXNoaWNvbnNcIj48L3NwYW4+Jyxcblx0XHRcdH0pKTtcblx0XHR9KTtcblxuXHRcdC8vIEVkaXQgQXBpIEtleVxuXHRcdCQoZG9jdW1lbnQpLm9mZignZm9jdXMnLCAnW2RhdGEtbGluaz1cImFwaV9rZXlcIl0nKTtcblx0XHQkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnW2RhdGEtbGluaz1cImFwaV9rZXlcIl0nLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoJCh0aGlzKS5wcm9wKCdyZWFkb25seScpICYmICEkKHRoaXMpLmhhc0NsYXNzKCdsb2FkaW5nJykpIHtcblx0XHRcdFx0JCh0aGlzKS5kYXRhKCd2YWx1ZScsICQodGhpcykudmFsKCkpLnByb3AoJ3JlYWRvbmx5JywgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkub2ZmKCdibHVyJywgJ1tkYXRhLWxpbms9XCJhcGlfa2V5XCJdJyk7XG5cdFx0JChkb2N1bWVudCkub24oJ2JsdXInLCAnW2RhdGEtbGluaz1cImFwaV9rZXlcIl0nLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoISQodGhpcykucHJvcCgncmVhZG9ubHknKSAmJiAhJCh0aGlzKS5oYXNDbGFzcygnZWRpdGluZycpKSB7XG5cdFx0XHRcdCQodGhpcykuZGF0YSgndmFsdWUnLCB1bmRlZmluZWQpLnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKGRvY3VtZW50KS5vZmYoJ2lucHV0JywgJ1tkYXRhLWxpbms9XCJhcGlfa2V5XCJdJywgd29vZ29zZW5kTWFwUGlja2VyLmhhbmRsZUFwaUtleUlucHV0KTtcblx0XHQkKGRvY3VtZW50KS5vbignaW5wdXQnLCAnW2RhdGEtbGluaz1cImFwaV9rZXlcIl0nLCB3b29nb3NlbmRNYXBQaWNrZXIuaGFuZGxlQXBpS2V5SW5wdXQpO1xuXG5cdFx0Ly8gRWRpdCBBcGkgS2V5XG5cdFx0JChkb2N1bWVudCkub2ZmKCdjbGljaycsICcud29vZ29zZW5kLWFwaS1rZXktYnV0dG9uJywgd29vZ29zZW5kTWFwUGlja2VyLmVkaXRBcGlLZXkpO1xuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcud29vZ29zZW5kLWFwaS1rZXktYnV0dG9uJywgd29vZ29zZW5kTWFwUGlja2VyLmVkaXRBcGlLZXkpO1xuXG5cdFx0Ly8gU2hvdyBTdG9yZSBMb2NhdGlvbiBQaWNrZXJcblx0XHQkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy53b29nb3NlbmQtZmllbGQtLW9yaWdpbicpO1xuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcud29vZ29zZW5kLWZpZWxkLS1vcmlnaW4nLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoJCh0aGlzKS5wcm9wKCdyZWFkb25seScpKSB7XG5cdFx0XHRcdCQoJy53b29nb3NlbmQtZWRpdC1sb2NhdGlvbi1waWNrZXInKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gU2hvdyBTdG9yZSBMb2NhdGlvbiBQaWNrZXJcblx0XHQkKGRvY3VtZW50KS5vZmYoJ2ZvY3VzJywgJ1tkYXRhLWxpbms9XCJsb2NhdGlvbl9waWNrZXJcIl0nLCB3b29nb3NlbmRNYXBQaWNrZXIuc2hvd0xvY2F0aW9uUGlja2VyKTtcblx0XHQkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnW2RhdGEtbGluaz1cImxvY2F0aW9uX3BpY2tlclwiXScsIHdvb2dvc2VuZE1hcFBpY2tlci5zaG93TG9jYXRpb25QaWNrZXIpO1xuXG5cdFx0Ly8gSGlkZSBTdG9yZSBMb2NhdGlvbiBQaWNrZXJcblx0XHQkKGRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJyN3b29nb3NlbmQtYnRuLS1tYXAtY2FuY2VsJywgd29vZ29zZW5kTWFwUGlja2VyLmhpZGVMb2NhdGlvblBpY2tlcik7XG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3b29nb3NlbmQtYnRuLS1tYXAtY2FuY2VsJywgd29vZ29zZW5kTWFwUGlja2VyLmhpZGVMb2NhdGlvblBpY2tlcik7XG5cblx0XHQvLyBBcHBseSBTdG9yZSBMb2NhdGlvblxuXHRcdCQoZG9jdW1lbnQpLm9mZignY2xpY2snLCAnI3dvb2dvc2VuZC1idG4tLW1hcC1hcHBseScsIHdvb2dvc2VuZE1hcFBpY2tlci5hcHBseUxvY2F0aW9uUGlja2VyKTtcblx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3dvb2dvc2VuZC1idG4tLW1hcC1hcHBseScsIHdvb2dvc2VuZE1hcFBpY2tlci5hcHBseUxvY2F0aW9uUGlja2VyKTtcblxuXHRcdC8vIFRvZ2dsZSBNYXAgU2VhcmNoIFBhbmVsXG5cdFx0JChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd29vZ29zZW5kLW1hcC1zZWFyY2gtcGFuZWwtdG9nZ2xlJywgd29vZ29zZW5kTWFwUGlja2VyLnRvZ2dsZU1hcFNlYXJjaCk7XG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3b29nb3NlbmQtbWFwLXNlYXJjaC1wYW5lbC10b2dnbGUnLCB3b29nb3NlbmRNYXBQaWNrZXIudG9nZ2xlTWFwU2VhcmNoKTtcblx0fSxcblx0dmFsaWRhdGVBUElLZXlCb3RoU2lkZTogZnVuY3Rpb24gKCRpbnB1dCkge1xuXHRcdHdvb2dvc2VuZE1hcFBpY2tlci52YWxpZGF0ZUFQSUtleVNlcnZlclNpZGUoJGlucHV0LCB3b29nb3NlbmRNYXBQaWNrZXIudmFsaWRhdGVBUElLZXlCcm93c2VyU2lkZSk7XG5cdH0sXG5cdHZhbGlkYXRlQVBJS2V5QnJvd3NlclNpZGU6IGZ1bmN0aW9uICgkaW5wdXQpIHtcblx0XHR3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3IgPSAnJztcblxuXHRcdHdvb2dvc2VuZE1hcFBpY2tlci5pbml0TWFwKCRpbnB1dC52YWwoKSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGdlb2NvZGVyQXJncyA9IHtcblx0XHRcdFx0bGF0TG5nOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBhcnNlRmxvYXQod29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcy5kZWZhdWx0TGF0KSwgcGFyc2VGbG9hdCh3b29nb3NlbmRNYXBQaWNrZXIucGFyYW1zLmRlZmF1bHRMbmcpKSxcblx0XHRcdH07XG5cblx0XHRcdHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG5cdFx0XHRnZW9jb2Rlci5nZW9jb2RlKGdlb2NvZGVyQXJncywgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykge1xuXHRcdFx0XHRpZiAoc3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09ICdvaycpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygndmFsaWRhdGVBUElLZXlCcm93c2VyU2lkZScsIHJlc3VsdHMpO1xuXG5cdFx0XHRcdFx0JGlucHV0LmFkZENsYXNzKCd2YWxpZCcpO1xuXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQkaW5wdXQucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcgbG9hZGluZyB2YWxpZCcpO1xuXHRcdFx0XHRcdH0sIDIwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Y2xlYXJJbnRlcnZhbCh3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3JDaGVja0ludGVydmFsKTtcblxuXHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLmFwaUtleUVycm9yQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCRpbnB1dC5oYXNDbGFzcygndmFsaWQnKSB8fCB3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3IpIHtcblx0XHRcdFx0XHRjbGVhckludGVydmFsKHdvb2dvc2VuZE1hcFBpY2tlci5hcGlLZXlFcnJvckNoZWNrSW50ZXJ2YWwpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHdvb2dvc2VuZE1hcFBpY2tlci5hcGlLZXlFcnJvcikge1xuXHRcdFx0XHRcdHdvb2dvc2VuZE1hcFBpY2tlci5zaG93RXJyb3IoJGlucHV0LCB3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3IpO1xuXHRcdFx0XHRcdCRpbnB1dC5wcm9wKCdyZWFkb25seScsIGZhbHNlKS5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAzMDApO1xuXHRcdH0pO1xuXHR9LFxuXHR2YWxpZGF0ZUFQSUtleVNlcnZlclNpZGU6IGZ1bmN0aW9uICgkaW5wdXQsIG9uU3VjY2Vzcykge1xuXHRcdCQuYWpheCh7XG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdHVybDogd29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcy5hamF4X3VybCxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0YWN0aW9uOiAnd29vZ29zZW5kX3ZhbGlkYXRlX2FwaV9rZXlfc2VydmVyJyxcblx0XHRcdFx0bm9uY2U6IHdvb2dvc2VuZE1hcFBpY2tlci5wYXJhbXMudmFsaWRhdGVfYXBpX2tleV9ub25jZSxcblx0XHRcdFx0a2V5OiAkaW5wdXQudmFsKCksXG5cdFx0XHR9XG5cdFx0fSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdGNvbnNvbGUubG9nKCd2YWxpZGF0ZUFQSUtleVNlcnZlclNpZGUnLCByZXNwb25zZSk7XG5cblx0XHRcdGlmICh0eXBlb2Ygb25TdWNjZXNzID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdG9uU3VjY2VzcygkaW5wdXQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JGlucHV0LmFkZENsYXNzKCd2YWxpZCcpO1xuXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdCRpbnB1dC5yZW1vdmVDbGFzcygnZWRpdGluZyBsb2FkaW5nIHZhbGlkJyk7XG5cdFx0XHRcdH0sIDIwMDApO1xuXHRcdFx0fVxuXHRcdH0pLmZhaWwoZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRpZiAoZXJyb3IucmVzcG9uc2VKU09OICYmIGVycm9yLnJlc3BvbnNlSlNPTi5kYXRhKSB7XG5cdFx0XHRcdHdvb2dvc2VuZE1hcFBpY2tlci5zaG93RXJyb3IoJGlucHV0LCBlcnJvci5yZXNwb25zZUpTT04uZGF0YSk7XG5cdFx0XHR9IGVsc2UgaWYgKGVycm9yLnN0YXR1c1RleHQpIHtcblx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnNob3dFcnJvcigkaW5wdXQsIGVycm9yLnN0YXR1c1RleHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnNob3dFcnJvcigkaW5wdXQsICdHb29nbGUgRGlzdGFuY2UgTWF0cml4IEFQSSBlcnJvcjogVWtub3duJyk7XG5cdFx0XHR9XG5cblx0XHRcdCRpbnB1dC5wcm9wKCdyZWFkb25seScsIGZhbHNlKS5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xuXHRcdH0pO1xuXHR9LFxuXHRzaG93RXJyb3I6IGZ1bmN0aW9uICgkaW5wdXQsIGVycm9yTWVzc2FnZSkge1xuXHRcdCQoJzxkaXYgY2xhc3M9XCJlcnJvciBub3RpY2Ugd29vZ29zZW5kLWVycm9yLWJveFwiPjxwPicgKyB3b29nb3NlbmRNYXBQaWNrZXIuY29udmVydEVycm9yKGVycm9yTWVzc2FnZSkgKyAnPC9wPjwvZGl2PicpXG5cdFx0XHQuaGlkZSgpXG5cdFx0XHQuYXBwZW5kVG8oJGlucHV0LmNsb3Nlc3QoJ3RkJykpXG5cdFx0XHQuc2xpZGVEb3duKCk7XG5cdH0sXG5cdHJlbW92ZUVycm9yOiBmdW5jdGlvbiAoJGlucHV0KSB7XG5cdFx0JGlucHV0LmNsb3Nlc3QoJ3RkJylcblx0XHRcdC5maW5kKCcud29vZ29zZW5kLWVycm9yLWJveCcpXG5cdFx0XHQucmVtb3ZlKCk7XG5cdH0sXG5cdGNvbnZlcnRFcnJvcjogZnVuY3Rpb24gKHRleHQpIHtcblx0XHR2YXIgZXhwID0gLyhcXGIoaHR0cHM/fGZ0cHxmaWxlKTpcXC9cXC9bLUEtWjAtOSsmQCNcXC8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjXFwvJT1+X3xdKS9pZztcblx0XHRyZXR1cm4gdGV4dC5yZXBsYWNlKGV4cCwgXCI8YSBocmVmPSckMScgdGFyZ2V0PSdfYmxhbmsnPiQxPC9hPlwiKTtcblx0fSxcblx0aGFuZGxlQXBpS2V5SW5wdXQ6IGZ1bmN0aW9uIChlKSB7XG5cdFx0dmFyICRpbnB1dCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuXHRcdGlmICgkaW5wdXQudmFsKCkgPT09ICRpbnB1dC5kYXRhKCd2YWx1ZScpKSB7XG5cdFx0XHQkaW5wdXQucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcnKS5uZXh0KCcud29vZ29zZW5kLWVkaXQtYXBpLWtleScpLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRpbnB1dC5hZGRDbGFzcygnZWRpdGluZycpLm5leHQoJy53b29nb3NlbmQtZWRpdC1hcGkta2V5JykuYWRkQ2xhc3MoJ2VkaXRpbmcnKTtcblx0XHR9XG5cblx0XHR3b29nb3NlbmRNYXBQaWNrZXIucmVtb3ZlRXJyb3IoJGlucHV0KTtcblx0fSxcblx0ZWRpdEFwaUtleTogZnVuY3Rpb24gKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgJGlucHV0ID0gJCh0aGlzKS5ibHVyKCkucHJldignaW5wdXQnKTtcblxuXHRcdGlmICghJGlucHV0Lmhhc0NsYXNzKCdlZGl0aW5nJykgfHwgJGlucHV0Lmhhc0NsYXNzKCdsb2FkaW5nJykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQkaW5wdXQucHJvcCgncmVhZG9ubHknLCB0cnVlKS5hZGRDbGFzcygnbG9hZGluZycpO1xuXG5cdFx0aWYgKCRpbnB1dC5hdHRyKCdkYXRhLWtleScpID09PSAnYXBpX2tleScpIHtcblx0XHRcdHdvb2dvc2VuZE1hcFBpY2tlci52YWxpZGF0ZUFQSUtleVNlcnZlclNpZGUoJGlucHV0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnZhbGlkYXRlQVBJS2V5QnJvd3NlclNpZGUoJGlucHV0KTtcblx0XHR9XG5cblx0XHR3b29nb3NlbmRNYXBQaWNrZXIucmVtb3ZlRXJyb3IoJGlucHV0KTtcblx0fSxcblx0c2hvd0xvY2F0aW9uUGlja2VyOiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0JCh0aGlzKS5ibHVyKCk7XG5cblx0XHR3b29nb3NlbmRNYXBQaWNrZXIuYXBpS2V5RXJyb3IgPSAnJztcblxuXHRcdHZhciBhcGlfa2V5X3BpY2tlciA9ICQoJyN3b29jb21tZXJjZV93b29nb3NlbmRfYXBpX2tleV9waWNrZXInKS52YWwoKTtcblxuXHRcdGlmICh3b29nb3NlbmRNYXBQaWNrZXIuaXNFZGl0aW5nQVBJS2V5KCkpIHtcblx0XHRcdHJldHVybiB3aW5kb3cuYWxlcnQod29vZ29zZW5kRXJyb3IoJ2ZpbmlzaF9lZGl0aW5nX2FwaScpKTtcblx0XHR9IGVsc2UgaWYgKCFhcGlfa2V5X3BpY2tlci5sZW5ndGgpIHtcblx0XHRcdHJldHVybiB3aW5kb3cuYWxlcnQod29vZ29zZW5kRXJyb3IoJ2FwaV9rZXlfcGlja2VyX2VtcHR5JykpO1xuXHRcdH1cblxuXHRcdCQoJy5tb2RhbC1jbG9zZS1saW5rJykuaGlkZSgpO1xuXG5cdFx0d29vZ29zZW5kVG9nZ2xlQnV0dG9ucyh7XG5cdFx0XHRidG5fbGVmdDoge1xuXHRcdFx0XHRpZDogJ21hcC1jYW5jZWwnLFxuXHRcdFx0XHRsYWJlbDogd29vZ29zZW5kSTE4bignYnV0dG9ucy5DYW5jZWwnKSxcblx0XHRcdFx0aWNvbjogJ3VuZG8nXG5cdFx0XHR9LFxuXHRcdFx0YnRuX3JpZ2h0OiB7XG5cdFx0XHRcdGlkOiAnbWFwLWFwcGx5Jyxcblx0XHRcdFx0bGFiZWw6IHdvb2dvc2VuZEkxOG4oJ2J1dHRvbnMuQXBwbHkgQ2hhbmdlcycpLFxuXHRcdFx0XHRpY29uOiAnZWRpdG9yLXNwZWxsY2hlY2snXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcjd29vZ29zZW5kLWZpZWxkLWdyb3VwLXdyYXAtLWxvY2F0aW9uX3BpY2tlcicpLmZhZGVJbigpLnNpYmxpbmdzKCkuaGlkZSgpO1xuXG5cdFx0dmFyICRzdWJUaXRsZSA9ICQoJyN3b29nb3NlbmQtZmllbGQtZ3JvdXAtd3JhcC0tbG9jYXRpb25fcGlja2VyJykuZmluZCgnLndjLXNldHRpbmdzLXN1Yi10aXRsZScpLmZpcnN0KCkuYWRkQ2xhc3MoJ3dvb2dvc2VuZC1oaWRkZW4nKTtcblxuXHRcdCQoJy53Yy1iYWNrYm9uZS1tb2RhbC1oZWFkZXInKS5maW5kKCdoMScpLmFwcGVuZCgnPHNwYW4+JyArICRzdWJUaXRsZS50ZXh0KCkgKyAnPC9zcGFuPicpO1xuXG5cdFx0d29vZ29zZW5kTWFwUGlja2VyLmluaXRNYXAoYXBpX2tleV9waWNrZXIsIHdvb2dvc2VuZE1hcFBpY2tlci5yZW5kZXJNYXApO1xuXHR9LFxuXHRoaWRlTG9jYXRpb25QaWNrZXI6IGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0d29vZ29zZW5kTWFwUGlja2VyLmRlc3Ryb3lNYXAoKTtcblxuXHRcdCQoJy5tb2RhbC1jbG9zZS1saW5rJykuc2hvdygpO1xuXG5cdFx0d29vZ29zZW5kVG9nZ2xlQnV0dG9ucygpO1xuXG5cdFx0JCgnI3dvb2dvc2VuZC1maWVsZC1ncm91cC13cmFwLS1sb2NhdGlvbl9waWNrZXInKS5maW5kKCcud2Mtc2V0dGluZ3Mtc3ViLXRpdGxlJykuZmlyc3QoKS5yZW1vdmVDbGFzcygnd29vZ29zZW5kLWhpZGRlbicpO1xuXG5cdFx0JCgnLndjLWJhY2tib25lLW1vZGFsLWhlYWRlcicpLmZpbmQoJ2gxIHNwYW4nKS5yZW1vdmUoKTtcblxuXHRcdCQoJyN3b29nb3NlbmQtZmllbGQtZ3JvdXAtd3JhcC0tbG9jYXRpb25fcGlja2VyJykuaGlkZSgpLnNpYmxpbmdzKCkubm90KCcud29vZ29zZW5kLWhpZGRlbicpLmZhZGVJbigpO1xuXHR9LFxuXHRhcHBseUxvY2F0aW9uUGlja2VyOiBmdW5jdGlvbiAoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmICghd29vZ29zZW5kTWFwUGlja2VyLmFwaUtleUVycm9yKSB7XG5cdFx0XHQkKCcjd29vY29tbWVyY2Vfd29vZ29zZW5kX29yaWdpbl9sYXQnKS52YWwod29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9sYXQpO1xuXHRcdFx0JCgnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fbG5nJykudmFsKHdvb2dvc2VuZE1hcFBpY2tlci5vcmlnaW5fbG5nKTtcblx0XHRcdCQoJyN3b29jb21tZXJjZV93b29nb3NlbmRfb3JpZ2luX2FkZHJlc3MnKS52YWwod29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9hZGRyZXNzKTtcblx0XHR9XG5cblx0XHR3b29nb3NlbmRNYXBQaWNrZXIuaGlkZUxvY2F0aW9uUGlja2VyKGUpO1xuXHR9LFxuXHR0b2dnbGVNYXBTZWFyY2g6IGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0JCgnI3dvb2dvc2VuZC1tYXAtc2VhcmNoLXBhbmVsJykudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XG5cdH0sXG5cdGluaXRNYXA6IGZ1bmN0aW9uIChhcGlLZXksIGNhbGxiYWNrKSB7XG5cdFx0d29vZ29zZW5kTWFwUGlja2VyLmRlc3Ryb3lNYXAoKTtcblxuXHRcdGlmIChfLmlzRW1wdHkoYXBpS2V5KSkge1xuXHRcdFx0YXBpS2V5ID0gJ0ludmFsaWRLZXknO1xuXHRcdH1cblxuXHRcdCQuZ2V0U2NyaXB0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/bGlicmFyaWVzPWdlb21ldHJ5LHBsYWNlcyZrZXk9JyArIGFwaUtleSwgY2FsbGJhY2spO1xuXHR9LFxuXHRyZW5kZXJNYXA6IGZ1bmN0aW9uICgpIHtcblx0XHR3b29nb3NlbmRNYXBQaWNrZXIub3JpZ2luX2xhdCA9ICQoJyN3b29jb21tZXJjZV93b29nb3NlbmRfb3JpZ2luX2xhdCcpLnZhbCgpO1xuXHRcdHdvb2dvc2VuZE1hcFBpY2tlci5vcmlnaW5fbG5nID0gJCgnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fbG5nJykudmFsKCk7XG5cblx0XHR2YXIgY3VycmVudExhdExuZyA9IHtcblx0XHRcdGxhdDogXy5pc0VtcHR5KHdvb2dvc2VuZE1hcFBpY2tlci5vcmlnaW5fbGF0KSA/IHBhcnNlRmxvYXQod29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcy5kZWZhdWx0TGF0KSA6IHBhcnNlRmxvYXQod29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9sYXQpLFxuXHRcdFx0bG5nOiBfLmlzRW1wdHkod29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9sbmcpID8gcGFyc2VGbG9hdCh3b29nb3NlbmRNYXBQaWNrZXIucGFyYW1zLmRlZmF1bHRMbmcpIDogcGFyc2VGbG9hdCh3b29nb3NlbmRNYXBQaWNrZXIub3JpZ2luX2xuZylcblx0XHR9O1xuXG5cdFx0dmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29vZ29zZW5kLW1hcC1jYW52YXMnKSxcblx0XHRcdHtcblx0XHRcdFx0bWFwVHlwZUlkOiAncm9hZG1hcCcsXG5cdFx0XHRcdGNlbnRlcjogY3VycmVudExhdExuZyxcblx0XHRcdFx0em9vbTogd29vZ29zZW5kTWFwUGlja2VyLnpvb21MZXZlbCxcblx0XHRcdFx0c3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuXHRcdFx0XHRtYXBUeXBlQ29udHJvbDogZmFsc2Vcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0dmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuXHRcdFx0bWFwOiBtYXAsXG5cdFx0XHRwb3NpdGlvbjogY3VycmVudExhdExuZyxcblx0XHRcdGRyYWdnYWJsZTogdHJ1ZSxcblx0XHRcdGljb246IHdvb2dvc2VuZE1hcFBpY2tlci5wYXJhbXMubWFya2VyXG5cdFx0fSk7XG5cblx0XHR2YXIgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHsgbWF4V2lkdGg6IDM1MCB9KTtcblxuXHRcdGlmIChfLmlzRW1wdHkod29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9sYXQpIHx8IF8uaXNFbXB0eSh3b29nb3NlbmRNYXBQaWNrZXIub3JpZ2luX2xuZykpIHtcblx0XHRcdGluZm93aW5kb3cuc2V0Q29udGVudCh3b29nb3NlbmRNYXBQaWNrZXIucGFyYW1zLmkxOG4uZHJhZ19tYXJrZXIpO1xuXHRcdFx0aW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnNldExhdExuZyhtYXJrZXIucG9zaXRpb24sIG1hcmtlciwgbWFwLCBpbmZvd2luZG93KTtcblx0XHR9XG5cblx0XHRnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdkcmFnc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpbmZvd2luZG93LmNsb3NlKCk7XG5cdFx0fSk7XG5cblx0XHRnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdkcmFnZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHR3b29nb3NlbmRNYXBQaWNrZXIuc2V0TGF0TG5nKGV2ZW50LmxhdExuZywgbWFya2VyLCBtYXAsIGluZm93aW5kb3cpO1xuXHRcdH0pO1xuXG5cdFx0JCgnI3dvb2dvc2VuZC1tYXAtd3JhcCcpLnByZXBlbmQod3AudGVtcGxhdGUoJ3dvb2dvc2VuZC1tYXAtc2VhcmNoLXBhbmVsJykoKSk7XG5cdFx0bWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29vZ29zZW5kLW1hcC1zZWFyY2gtcGFuZWwnKSk7XG5cblx0XHR2YXIgbWFwU2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvb2dvc2VuZC1tYXAtc2VhcmNoLWlucHV0JykpO1xuXG5cdFx0Ly8gQmlhcyB0aGUgU2VhcmNoQm94IHJlc3VsdHMgdG93YXJkcyBjdXJyZW50IG1hcCdzIHZpZXdwb3J0LlxuXHRcdG1hcC5hZGRMaXN0ZW5lcignYm91bmRzX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRtYXBTZWFyY2hCb3guc2V0Qm91bmRzKG1hcC5nZXRCb3VuZHMoKSk7XG5cdFx0fSk7XG5cblx0XHR2YXIgbWFya2VycyA9IFtdO1xuXG5cdFx0Ly8gTGlzdGVuIGZvciB0aGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgcHJlZGljdGlvbiBhbmQgcmV0cmlldmUgbW9yZSBkZXRhaWxzIGZvciB0aGF0IHBsYWNlLlxuXHRcdG1hcFNlYXJjaEJveC5hZGRMaXN0ZW5lcigncGxhY2VzX2NoYW5nZWQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgcGxhY2VzID0gbWFwU2VhcmNoQm94LmdldFBsYWNlcygpO1xuXG5cdFx0XHRpZiAocGxhY2VzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIG91dCB0aGUgb2xkIG1hcmtlcnMuXG5cdFx0XHRtYXJrZXJzLmZvckVhY2goZnVuY3Rpb24gKG1hcmtlcikge1xuXHRcdFx0XHRtYXJrZXIuc2V0TWFwKG51bGwpO1xuXHRcdFx0fSk7XG5cblx0XHRcdG1hcmtlcnMgPSBbXTtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggcGxhY2UsIGdldCB0aGUgaWNvbiwgbmFtZSBhbmQgbG9jYXRpb24uXG5cdFx0XHR2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuXG5cdFx0XHRwbGFjZXMuZm9yRWFjaChmdW5jdGlvbiAocGxhY2UpIHtcblx0XHRcdFx0aWYgKCFwbGFjZS5nZW9tZXRyeSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdSZXR1cm5lZCBwbGFjZSBjb250YWlucyBubyBnZW9tZXRyeScpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuXHRcdFx0XHRcdG1hcDogbWFwLFxuXHRcdFx0XHRcdHBvc2l0aW9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbixcblx0XHRcdFx0XHRkcmFnZ2FibGU6IHRydWUsXG5cdFx0XHRcdFx0aWNvbjogd29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcy5tYXJrZXJcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnNldExhdExuZyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbiwgbWFya2VyLCBtYXAsIGluZm93aW5kb3cpO1xuXG5cdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2RyYWdzdGFydCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpbmZvd2luZG93LmNsb3NlKCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0XHR3b29nb3NlbmRNYXBQaWNrZXIuc2V0TGF0TG5nKGV2ZW50LmxhdExuZywgbWFya2VyLCBtYXAsIGluZm93aW5kb3cpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBDcmVhdGUgYSBtYXJrZXIgZm9yIGVhY2ggcGxhY2UuXG5cdFx0XHRcdG1hcmtlcnMucHVzaChtYXJrZXIpO1xuXG5cdFx0XHRcdGlmIChwbGFjZS5nZW9tZXRyeS52aWV3cG9ydCkge1xuXHRcdFx0XHRcdC8vIE9ubHkgZ2VvY29kZXMgaGF2ZSB2aWV3cG9ydC5cblx0XHRcdFx0XHRib3VuZHMudW5pb24ocGxhY2UuZ2VvbWV0cnkudmlld3BvcnQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJvdW5kcy5leHRlbmQocGxhY2UuZ2VvbWV0cnkubG9jYXRpb24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0bWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuXHRcdH0pO1xuXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcjd29vZ29zZW5kLW1hcC1zZWFyY2gtcGFuZWwnKS5yZW1vdmVDbGFzcygnd29vZ29zZW5kLWhpZGRlbicpO1xuXHRcdH0sIDUwMCk7XG5cdH0sXG5cdGRlc3Ryb3lNYXA6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAod2luZG93Lmdvb2dsZSkge1xuXHRcdFx0d2luZG93Lmdvb2dsZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQkKCcjd29vZ29zZW5kLW1hcC1jYW52YXMnKS5lbXB0eSgpO1xuXHRcdCQoJyN3b29nb3NlbmQtbWFwLXNlYXJjaC1wYW5lbCcpLnJlbW92ZSgpO1xuXHR9LFxuXHRzZXRMYXRMbmc6IGZ1bmN0aW9uIChsb2NhdGlvbiwgbWFya2VyLCBtYXAsIGluZm93aW5kb3cpIHtcblx0XHR2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuXHRcdGdlb2NvZGVyLmdlb2NvZGUoXG5cdFx0XHR7XG5cdFx0XHRcdGxhdExuZzogbG9jYXRpb25cblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XG5cdFx0XHRcdGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LICYmIHJlc3VsdHNbMF0pIHtcblx0XHRcdFx0XHR2YXIgaW5mb3dpbmRvd0NvbnRlbnRzID0gW1xuXHRcdFx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLnBhcmFtcy5pMThuLmxhdGl0dWRlICsgJzogJyArIGxvY2F0aW9uLmxhdCgpLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0XHR3b29nb3NlbmRNYXBQaWNrZXIucGFyYW1zLmkxOG4ubG9uZ2l0dWRlICsgJzogJyArIGxvY2F0aW9uLmxuZygpLnRvU3RyaW5nKClcblx0XHRcdFx0XHRdO1xuXG5cdFx0XHRcdFx0aW5mb3dpbmRvdy5zZXRDb250ZW50KGluZm93aW5kb3dDb250ZW50cy5qb2luKCc8YnIgLz4nKSk7XG5cdFx0XHRcdFx0aW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcblxuXHRcdFx0XHRcdG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRpbmZvd2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0JCgnI3dvb2dvc2VuZC1tYXAtc2VhcmNoLWlucHV0JykudmFsKHJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3MpO1xuXG5cdFx0XHRcdFx0d29vZ29zZW5kTWFwUGlja2VyLm9yaWdpbl9sYXQgPSBsb2NhdGlvbi5sYXQoKTtcblx0XHRcdFx0XHR3b29nb3NlbmRNYXBQaWNrZXIub3JpZ2luX2xuZyA9IGxvY2F0aW9uLmxuZygpO1xuXHRcdFx0XHRcdHdvb2dvc2VuZE1hcFBpY2tlci5vcmlnaW5fYWRkcmVzcyA9IHJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3M7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0bWFwLnNldENlbnRlcihsb2NhdGlvbik7XG5cdH0sXG5cdGlzRWRpdGluZ0FQSUtleTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAkKCdbZGF0YS1saW5rPVwiYXBpX2tleVwiXS5lZGl0aW5nJykubGVuZ3RoID4gMDtcblx0fSxcbn07XG5cbi8qKlxuICogQmFja2VuZCBTY3JpcHRzXG4gKi9cblxudmFyIHdvb2dvc2VuZEJhY2tlbmQgPSB7XG5cdHJlbmRlckZvcm06IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoISQoJyN3b29jb21tZXJjZV93b29nb3NlbmRfb3JpZ2luX3R5cGUnKSB8fCAhJCgnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fdHlwZScpLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFN1Ym1pdCBmb3JtXG5cdFx0JChkb2N1bWVudCkub2ZmKCdjbGljaycsICcjd29vZ29zZW5kLWJ0bi0tc2F2ZS1zZXR0aW5ncycsIHdvb2dvc2VuZEJhY2tlbmQuc3VibWl0Rm9ybSk7XG5cdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN3b29nb3NlbmQtYnRuLS1zYXZlLXNldHRpbmdzJywgd29vZ29zZW5kQmFja2VuZC5zdWJtaXRGb3JtKTtcblxuXHRcdC8vIFRvZ2dsZSBTdG9yZSBPcmlnaW4gRmllbGRzXG5cdFx0JChkb2N1bWVudCkub2ZmKCdjaGFuZ2UnLCAnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fdHlwZScsIHdvb2dvc2VuZEJhY2tlbmQudG9nZ2xlU3RvcmVPcmlnaW5GaWVsZHMpO1xuXHRcdCQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fdHlwZScsIHdvb2dvc2VuZEJhY2tlbmQudG9nZ2xlU3RvcmVPcmlnaW5GaWVsZHMpO1xuXG5cdFx0JCgnI3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9vcmlnaW5fdHlwZScpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXG5cdFx0JCgnLndjLW1vZGFsLXNoaXBwaW5nLW1ldGhvZC1zZXR0aW5ncyB0YWJsZS5mb3JtLXRhYmxlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgJHRhYmxlID0gJCh0aGlzKTtcblx0XHRcdHZhciAkcm93cyA9ICR0YWJsZS5maW5kKCd0cicpO1xuXG5cdFx0XHRpZiAoISRyb3dzLmxlbmd0aCkge1xuXHRcdFx0XHQkdGFibGUucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcud29vZ29zZW5kLWZpZWxkLWdyb3VwJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgJGZpZWxkR3JvdXAgPSAkKHRoaXMpO1xuXG5cdFx0XHR2YXIgZmllbGRHcm91cElkID0gJGZpZWxkR3JvdXBcblx0XHRcdFx0LmF0dHIoJ2lkJylcblx0XHRcdFx0LnJlcGxhY2UoJ3dvb2NvbW1lcmNlX3dvb2dvc2VuZF9maWVsZF9ncm91cF8nLCAnJyk7XG5cblx0XHRcdHZhciAkZmllbGRHcm91cERlc2NyaXB0aW9uID0gJGZpZWxkR3JvdXBcblx0XHRcdFx0Lm5leHQoJ3AnKVxuXHRcdFx0XHQuZGV0YWNoKCk7XG5cblx0XHRcdHZhciAkZmllbGRHcm91cFRhYmxlID0gJGZpZWxkR3JvdXBcblx0XHRcdFx0Lm5leHRBbGwoJ3RhYmxlLmZvcm0tdGFibGUnKVxuXHRcdFx0XHQuZmlyc3QoKVxuXHRcdFx0XHQuYXR0cignaWQnLCAnd29vZ29zZW5kLXRhYmxlLS0nICsgZmllbGRHcm91cElkKVxuXHRcdFx0XHQuYWRkQ2xhc3MoJ3dvb2dvc2VuZC10YWJsZSB3b29nb3NlbmQtdGFibGUtLScgKyBmaWVsZEdyb3VwSWQpXG5cdFx0XHRcdC5kZXRhY2goKTtcblxuXHRcdFx0JGZpZWxkR3JvdXBcblx0XHRcdFx0LndyYXAoJzxkaXYgaWQ9XCJ3b29nb3NlbmQtZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCArICdcIiBjbGFzcz1cIndvb2dvc2VuZC1maWVsZC1ncm91cC13cmFwIHN0dWZmYm94IHdvb2dvc2VuZC1maWVsZC1ncm91cC13cmFwLS0nICsgZmllbGRHcm91cElkICsgJ1wiPjwvZGl2PicpO1xuXG5cdFx0XHQkZmllbGRHcm91cERlc2NyaXB0aW9uXG5cdFx0XHRcdC5hcHBlbmRUbygnI3dvb2dvc2VuZC1maWVsZC1ncm91cC13cmFwLS0nICsgZmllbGRHcm91cElkKTtcblxuXHRcdFx0JGZpZWxkR3JvdXBUYWJsZVxuXHRcdFx0XHQuYXBwZW5kVG8oJyN3b29nb3NlbmQtZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCk7XG5cblx0XHRcdGlmICgkZmllbGRHcm91cFRhYmxlICYmICRmaWVsZEdyb3VwVGFibGUubGVuZ3RoKSB7XG5cdFx0XHRcdGlmICgkZmllbGRHcm91cC5oYXNDbGFzcygnd29vZ29zZW5kLWZpZWxkLWdyb3VwLWhpZGRlbicpKSB7XG5cdFx0XHRcdFx0JCgnI3dvb2dvc2VuZC1maWVsZC1ncm91cC13cmFwLS0nICsgZmllbGRHcm91cElkKVxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCd3b29nb3NlbmQtaGlkZGVuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJyN3b29nb3NlbmQtZmllbGQtZ3JvdXAtd3JhcC0tJyArIGZpZWxkR3JvdXBJZCkucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkKCcud29vZ29zZW5kLWZpZWxkJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgJGZpZWxkID0gJCh0aGlzKTtcblx0XHRcdHZhciBmaWVsZFVuaXQgPSAkZmllbGQuYXR0cignZGF0YS11bml0Jyk7XG5cblx0XHRcdGlmICghZmllbGRVbml0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0JGZpZWxkLm5leHQoJy53b29nb3NlbmQtZmllbGQtdW5pdCcpLnJlbW92ZSgpO1xuXHRcdFx0JGZpZWxkLmFmdGVyKCc8c3BhbiBjbGFzcz1cIndvb2dvc2VuZC1maWVsZC11bml0XCI+JyArIGZpZWxkVW5pdCArICc8L3NwYW4+Jyk7XG5cdFx0fSk7XG5cblx0XHR2YXIgcGFyYW1zID0gXy5tYXBPYmplY3Qod29vZ29zZW5kX2JhY2tlbmQsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuXHRcdFx0c3dpdGNoIChrZXkpIHtcblx0XHRcdFx0Y2FzZSAnZGVmYXVsdF9sYXQnOlxuXHRcdFx0XHRjYXNlICdkZWZhdWx0X2xuZyc6XG5cdFx0XHRcdGNhc2UgJ3Rlc3RfZGVzdGluYXRpb25fbGF0Jzpcblx0XHRcdFx0Y2FzZSAndGVzdF9kZXN0aW5hdGlvbl9sbmcnOlxuXHRcdFx0XHRcdHJldHVybiBwYXJzZUZsb2F0KHZhbCk7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0d29vZ29zZW5kTWFwUGlja2VyLmluaXQocGFyYW1zKTtcblxuXHRcdHdvb2dvc2VuZFRvZ2dsZUJ1dHRvbnMoKTtcblx0fSxcblx0bWF5YmVPcGVuTW9kYWw6IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBUcnkgc2hvdyBzZXR0aW5ncyBtb2RhbCBvbiBzZXR0aW5ncyBwYWdlLlxuXHRcdGlmICh3b29nb3NlbmRfYmFja2VuZC5zaG93U2V0dGluZ3MpIHtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgaXNNZXRob2RBZGRlZCA9IGZhbHNlO1xuXHRcdFx0XHR2YXIgbWV0aG9kcyA9ICQoZG9jdW1lbnQpLmZpbmQoJy53Yy1zaGlwcGluZy16b25lLW1ldGhvZC10eXBlJyk7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHZhciBtZXRob2QgPSBtZXRob2RzW2ldO1xuXHRcdFx0XHRcdGlmICgkKG1ldGhvZCkudGV4dCgpID09PSB3b29nb3NlbmRfYmFja2VuZC5tZXRob2RUaXRsZSkge1xuXHRcdFx0XHRcdFx0JChtZXRob2QpLmNsb3Nlc3QoJ3RyJykuZmluZCgnLnJvdy1hY3Rpb25zIC53Yy1zaGlwcGluZy16b25lLW1ldGhvZC1zZXR0aW5ncycpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0XHRpc01ldGhvZEFkZGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTaG93IEFkZCBzaGlwcGluZyBtZXRob2QgbW9kYWwgaWYgdGhlIHNoaXBwaW5nIGlzIG5vdCBhZGRlZC5cblx0XHRcdFx0aWYgKCFpc01ldGhvZEFkZGVkKSB7XG5cdFx0XHRcdFx0JCgnLndjLXNoaXBwaW5nLXpvbmUtYWRkLW1ldGhvZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0JCgnc2VsZWN0W25hbWU9XCJhZGRfbWV0aG9kX2lkXCJdJykudmFsKHdvb2dvc2VuZF9iYWNrZW5kLm1ldGhvZElkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgNTAwKTtcblx0XHR9XG5cdH0sXG5cdHN1Ym1pdEZvcm06IGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0aWYgKHdvb2dvc2VuZE1hcFBpY2tlci5pc0VkaXRpbmdBUElLZXkoKSkge1xuXHRcdFx0d2luZG93LmFsZXJ0KHdvb2dvc2VuZEVycm9yKCdmaW5pc2hfZWRpdGluZ19hcGknKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNidG4tb2snKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH1cblx0fSxcblx0dG9nZ2xlU3RvcmVPcmlnaW5GaWVsZHM6IGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHZhciBzZWxlY3RlZCA9ICQodGhpcykudmFsKCk7XG5cdFx0dmFyIGZpZWxkcyA9ICQodGhpcykuZGF0YSgnZmllbGRzJyk7XG5cdFx0Xy5lYWNoKGZpZWxkcywgZnVuY3Rpb24gKGZpZWxkSWRzLCBmaWVsZFZhbHVlKSB7XG5cdFx0XHRfLmVhY2goZmllbGRJZHMsIGZ1bmN0aW9uIChmaWVsZElkKSB7XG5cdFx0XHRcdGlmIChmaWVsZFZhbHVlICE9PSBzZWxlY3RlZCkge1xuXHRcdFx0XHRcdCQoJyMnICsgZmllbGRJZCkuY2xvc2VzdCgndHInKS5oaWRlKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JCgnIycgKyBmaWVsZElkKS5jbG9zZXN0KCd0cicpLnNob3coKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cdGluaXRGb3JtOiBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gSW5pdCBmb3JtXG5cdFx0JChkb2N1bWVudC5ib2R5KS5vZmYoJ3djX2JhY2tib25lX21vZGFsX2xvYWRlZCcsIHdvb2dvc2VuZEJhY2tlbmQucmVuZGVyRm9ybSk7XG5cdFx0JChkb2N1bWVudC5ib2R5KS5vbignd2NfYmFja2JvbmVfbW9kYWxfbG9hZGVkJywgd29vZ29zZW5kQmFja2VuZC5yZW5kZXJGb3JtKTtcblx0fSxcblx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdHdvb2dvc2VuZEJhY2tlbmQuaW5pdEZvcm0oKTtcblx0XHR3b29nb3NlbmRCYWNrZW5kLm1heWJlT3Blbk1vZGFsKCk7XG5cdH1cbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KHdvb2dvc2VuZEJhY2tlbmQuaW5pdCk7XG59KGpRdWVyeSkpO1xuIl19
